var test_tracker = new Array();
var states;
var stacks;
var cnt_exe;
var cnt_browse;
var exclude_from_stack;
var result;
var goto_var;
var thevalueoftheexeclick_2;
var right_values = new Array();
var cur_sem;	
var nbr_tests = 0;
function remove_overlay() {
	$(".overlay").remove();
	$(".modal").remove();
	$(".top").remove();
	$(".mid").remove();
	$(".vertical_align").remove();
	$(".but").remove();
	goto();
}

function editor(id) {
    var editor = CodeMirror.fromTextArea(document.getElementById(id), {
        lineNumbers: true,
        mode: {name: "oz", globalVars: true},
		theme : 'neat',
		readOnly : true,
    });
	var text = document.getElementById(id).value;   
	var lines = text.split(/\r|\r\n|\n/);
	var nbr_lines = lines.length;
	editor.setSize(486, 16*nbr_lines);
}

function editor_2(id, code) {
    var editor = CodeMirror.fromTextArea(document.getElementById('code_'+id), {
        lineNumbers: true,
        mode: {name: "oz", globalVars: true},
		theme : 'neat',
		readOnly : true,
    });  
	var lines = code.split(/\r|\r\n|\n/);
	var nbr_lines = lines.length;
	editor.setSize(486, 10+14*nbr_lines);
	return 10+14*nbr_lines;
	
}

function add_test(code, answer) {
	nbr_tests++;		
	right_values.push(answer);
	document.getElementById('main_sub').innerHTML += '<div id="mt_'+nbr_tests+'" class="main_box main_test"><div id="mb_'+nbr_tests+'" class="main_subbox test"><h2 id="Title '+nbr_tests+'">Test '+nbr_tests+'</h2><p><form><textarea id="code_'+nbr_tests+'">'+code+'</textarea></form></p><p><input id="exe" type="submit" class="button" onclick=exe_fun('+nbr_tests+') value="EXECUTE"/></p></div><div id="res_'+nbr_tests+'" class="result"></div></div>';
	a = editor_2(nbr_tests, code);
	document.getElementById('mt_'+nbr_tests).style.height = 215+a+"px";
}

function compare(str1, str2) {
	a = str1.split("</p>").join(" ");
	a = a.split("<p>").join(" ");
	a = a.split("&nbsp").join(" ");
	a = a.split("\\t").join(" ");
	a = a.split("\\n").join(" ");	
	a = a.replace(/\s+/g, ' ');
	
	b = str2.split("</p>").join(" ");
	b = b.split("<p>").join(" ");
	b = b.split("&nbsp").join(" ");
	b = b.split("\\t").join(" ");
	b = b.split("\\n").join(" ");	
	b = b.replace(/\s+/g, ' ');	
	
	return a===b;
}

function error_manager(e) {
	$("body").append('<div class="overlay"></div><div class="modal"><div class="top error"><div class="vertical_align">Error !</div></div><div class="mid"><div class="message">'+e.message+'</div></div><button type="button" class="but" onclick="remove_overlay()">Done</button></div>');
}

function add_right_values(smth) {
	right_values.push(smth);
}

function exe_fun_complete() {
	for(var i=1; i<=nbr_tests; i++) {
		exe_fun(i);
	}
}

function exe_fun(thevalueoftheexeclick) {
    try {
		thevalueoftheexeclick_2 = thevalueoftheexeclick;
		identifiers_list = {};
		cells_list = new Array();
		identifiers_nbr = {};
		cur_condition = {};
		cur_condition[0] = true;
		proc = new Array();
		CE = new Array();
		cur_proc = "";
		cur_id = 1;					// Identifier of the current IF THEN condition
		state_decl = new Array();
	  	cur_decl = 0;
	 	states = new Array();
	  	stacks = new Array();
		identifiers_nbr = new Array();
	    cnt_exe = 0; 
	    cnt_browse = 0;
	    exclude_from_stack = new Array();
		infinite_loop_avoid = new Array();		
		param_list = new Array();	     	    
		var lines = document.getElementById("code_"+thevalueoftheexeclick).value.split('\n');
		var startTime = new Date();
        result = oz.parse(document.getElementById("code_"+thevalueoftheexeclick).value);
		var endTime = new Date();
		var timeDiff = endTime - startTime;
	    cnt_browse = cnt_exe;
		var a = JSON.stringify(cur_sem);
		test_tracker.push([document.getElementById("code_"+thevalueoftheexeclick).value.length, timeDiff]);
		if(compare(cur_sem,right_values[thevalueoftheexeclick-1])) {
			document.getElementById('res_'+thevalueoftheexeclick).innerHTML = '<div class="inner_result"><div class="green">OK</div>in '+timeDiff+' ms</div>';			
		}
		else {
			document.getElementById('res_'+thevalueoftheexeclick).innerHTML = '<div class="inner_result"><div class="red">KO</div>in '+timeDiff+' ms</div>';			
		}    
    } catch (e) {
		 $('<p>KO</p>').appendTo('#mb_'+thevalueoftheexeclick);
    }
}

function add_it(){
	add_test('local&nbspA&nbspin\n&nbsp&nbspA&nbsp=&nbsp42\nend', '[{"state_loc":"","stack":"a = 42","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":8},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbspA&nbsp=&nbsp~42\nend', '[{"state_loc":"","stack":"a = -42","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":9},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp10.4\nend', '[{"state_loc":"","stack":"y = 10.4","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":10},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsptrue\nend', '[{"state_loc":"","stack":"y = true","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":10},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbspfalse\nend', '[{"state_loc":"","stack":"y = false","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":11},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbspnil\nend', '[{"state_loc":"","stack":"y = nil","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":9},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp"This&nbspis&nbspa&nbspsentence"\nend', '[{"state_loc":"","stack":"y = \\"This is a sentence\\"","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":26},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp4+5\nend', '[{"state_loc":"","stack":"y = 9","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":9},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbspA&nbsp=&nbsp5-3\nend', '[{"state_loc":"","stack":"a = 2","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":9},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp4.0*5.0\nend', '[{"state_loc":"","stack":"y = 20","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":13},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp20&nbspmod&nbsp3\nend', '[{"state_loc":"","stack":"y = 2","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":14},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspA&nbspin\n&nbsp&nbspA&nbsp=&nbsp4&nbspdiv&nbsp2\nend', '[{"state_loc":"","stack":"a = 2","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":13},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbspA&nbsp=&nbsp4.0/2.3\nend', '[{"state_loc":"","stack":"a = 1.7391304347826089","type":2},{"state_loc":{"first_line":2,"last_line":2,"first_column":2,"last_column":13},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":3,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspB&nbsp=&nbspA-2\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"b = 1","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":11},"stack":"a = 3","type":2},{"state_loc":{"first_line":3,"last_line":4,"first_column":4,"last_column":11},"stack":"b","type":1},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp2+A\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"b = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":11},"stack":"a = 3","type":2},{"state_loc":{"first_line":3,"last_line":4,"first_column":4,"last_column":11},"stack":"b","type":1},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp2*A\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"b = 6","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":11},"stack":"a = 3","type":2},{"state_loc":{"first_line":3,"last_line":4,"first_column":4,"last_column":11},"stack":"b","type":1},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspA&nbspin\n&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp2&nbspdiv&nbspA\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"b = 0","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":15},"stack":"a = 3","type":2},{"state_loc":{"first_line":3,"last_line":4,"first_column":4,"last_column":15},"stack":"b","type":1},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"a","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp10\n&nbsp&nbsplocal&nbspY&nbspin\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp1\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_1 = 1","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":9},"stack":"y_1","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":2,"last_column":5},"stack":"y = 10","type":2},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp10\n&nbsp&nbsplocal&nbspX&nbspin\n&nbsp&nbsp&nbsp&nbspX&nbsp=&nbspY+1\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x = 11","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":11},"stack":"x","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":2,"last_column":5},"stack":"y = 10","type":2},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp10\n&nbsp&nbsplocal&nbspX&nbspin\n&nbsp&nbsp&nbsp&nbspX&nbsp=&nbspY+Y\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x = 20","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":4,"last_column":11},"stack":"x","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":2,"last_column":5},"stack":"y = 10","type":2},{"state_loc":{"first_line":2,"last_line":5,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":6,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp10\n&nbsp&nbsplocal&nbspX&nbspin\n&nbsp&nbsp&nbsp&nbspX&nbsp=&nbsp{NewCell&nbspY}\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX:=X1\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"c1 := X1","type":2},{"state_loc":{"first_line":7,"last_line":7,"first_column":6,"last_column":11},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":6,"last_line":7,"first_column":6,"last_column":11},"stack":"x1","type":1},{"state_loc":{"first_line":5,"last_line":8,"first_column":4,"last_column":7},"stack":"x = c1","type":2},{"state_loc":{"first_line":4,"last_line":8,"first_column":4,"last_column":7},"stack":"x","type":1},{"state_loc":{"first_line":3,"last_line":9,"first_column":2,"last_column":5},"stack":"y = 10","type":2},{"state_loc":{"first_line":2,"last_line":9,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":10,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbspY&nbsp=&nbsp10\n&nbsp&nbsplocal&nbspX&nbspin\n&nbsp&nbsp&nbsp&nbspX&nbsp=&nbsp{NewCell&nbspY}\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp@X+3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX:=X1\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"c1 := X1","type":2},{"state_loc":{"first_line":7,"last_line":7,"first_column":6,"last_column":11},"stack":"x1 = 13","type":2},{"state_loc":{"first_line":6,"last_line":7,"first_column":6,"last_column":11},"stack":"x1","type":1},{"state_loc":{"first_line":5,"last_line":8,"first_column":4,"last_column":7},"stack":"x = c1","type":2},{"state_loc":{"first_line":4,"last_line":8,"first_column":4,"last_column":7},"stack":"x","type":1},{"state_loc":{"first_line":3,"last_line":9,"first_column":2,"last_column":5},"stack":"y = 10","type":2},{"state_loc":{"first_line":2,"last_line":9,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":10,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsptrue\n&nbsp&nbsp&nbsp&nbspif&nbspA&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 3","type":2},{"state_loc":{"first_line":5,"last_line":5,"first_column":6,"last_column":11},"stack":"","type":4},{"state_loc":{"first_line":4,"last_line":8,"first_column":4,"last_column":7},"stack":"a = true","type":2},{"state_loc":{"first_line":3,"last_line":8,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":9,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":10,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbspfalse\n&nbsp&nbsp&nbsp&nbspif&nbspA&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 5","type":2},{"state_loc":{"first_line":7,"last_line":7,"first_column":6,"last_column":11},"stack":"","type":4},{"state_loc":{"first_line":4,"last_line":8,"first_column":4,"last_column":7},"stack":"a = false","type":2},{"state_loc":{"first_line":3,"last_line":8,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":9,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":10,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp10\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp(A=&lt10)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspB&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 3","type":2},{"state_loc":{"first_line":7,"last_line":7,"first_column":8,"last_column":13},"stack":"","type":4},{"state_loc":{"first_line":6,"last_line":10,"first_column":6,"last_column":9},"stack":"b = true","type":2},{"state_loc":{"first_line":5,"last_line":10,"first_column":6,"last_column":9},"stack":"a = 10","type":2},{"state_loc":{"first_line":4,"last_line":10,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":11,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":12,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":13,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp10\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp(A&lt10)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspB&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 5","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":8,"last_column":13},"stack":"","type":4},{"state_loc":{"first_line":6,"last_line":10,"first_column":6,"last_column":9},"stack":"b = false","type":2},{"state_loc":{"first_line":5,"last_line":10,"first_column":6,"last_column":9},"stack":"a = 10","type":2},{"state_loc":{"first_line":4,"last_line":10,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":11,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":12,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":13,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp10\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp(A==10)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspB&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 3","type":2},{"state_loc":{"first_line":7,"last_line":7,"first_column":8,"last_column":13},"stack":"","type":4},{"state_loc":{"first_line":6,"last_line":10,"first_column":6,"last_column":9},"stack":"b = true","type":2},{"state_loc":{"first_line":5,"last_line":10,"first_column":6,"last_column":9},"stack":"a = 10","type":2},{"state_loc":{"first_line":4,"last_line":10,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":11,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":12,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":13,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp10\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp(A&gt=10)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspB&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 3","type":2},{"state_loc":{"first_line":7,"last_line":7,"first_column":8,"last_column":13},"stack":"","type":4},{"state_loc":{"first_line":6,"last_line":10,"first_column":6,"last_column":9},"stack":"b = true","type":2},{"state_loc":{"first_line":5,"last_line":10,"first_column":6,"last_column":9},"stack":"a = 10","type":2},{"state_loc":{"first_line":4,"last_line":10,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":11,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":12,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":13,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp10\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp(A&gt10)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspB&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 5","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":8,"last_column":13},"stack":"","type":4},{"state_loc":{"first_line":6,"last_line":10,"first_column":6,"last_column":9},"stack":"b = false","type":2},{"state_loc":{"first_line":5,"last_line":10,"first_column":6,"last_column":9},"stack":"a = 10","type":2},{"state_loc":{"first_line":4,"last_line":10,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":11,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":12,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":13,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp10\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp(A\\=10)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspB&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y = 5","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":8,"last_column":13},"stack":"","type":4},{"state_loc":{"first_line":6,"last_line":10,"first_column":6,"last_column":9},"stack":"b = false","type":2},{"state_loc":{"first_line":5,"last_line":10,"first_column":6,"last_column":9},"stack":"a = 10","type":2},{"state_loc":{"first_line":4,"last_line":10,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":11,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":12,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":13,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbspnil\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY='+'\'|\''+'(1:A&nbsp2:B)&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspY&nbspof&nbsp'+'\'|\''+'(1:C&nbsp3:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x4 = 4","type":2},{"state_loc":{"first_line":13,"last_line":13,"first_column":10,"last_column":16},"stack":"x4","type":1},{"state_loc":{"first_line":12,"last_line":14,"first_column":8,"last_column":11},"stack":"","type":5},{"state_loc":{"first_line":7,"last_line":15,"first_column":6,"last_column":9},"stack":"y = '+'\'|\''+'(1:A 2:B)","type":2},{"state_loc":{"first_line":6,"last_line":15,"first_column":6,"last_column":9},"stack":"b = nil","type":2},{"state_loc":{"first_line":5,"last_line":15,"first_column":6,"last_column":9},"stack":"a = 3","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":17,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":18,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbspnil\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY='+'\'|\''+'(1:A&nbsp2:B)&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspY&nbspof&nbsp'+'\'|\''+'(1:C&nbsp2:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x2 = 3","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":10,"last_column":14},"stack":"x2","type":1},{"state_loc":{"first_line":8,"last_line":10,"first_column":8,"last_column":11},"stack":["C = 3","D = nil"],"type":5},{"state_loc":{"first_line":7,"last_line":15,"first_column":6,"last_column":9},"stack":"y = '+'\'|\''+'(1:A 2:B)","type":2},{"state_loc":{"first_line":6,"last_line":15,"first_column":6,"last_column":9},"stack":"b = nil","type":2},{"state_loc":{"first_line":5,"last_line":15,"first_column":6,"last_column":9},"stack":"a = 3","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":17,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":18,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbspnil\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY='+'\'|\''+'(1:A&nbsp2:B)&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspY&nbspof&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x4 = 4","type":2},{"state_loc":{"first_line":13,"last_line":13,"first_column":10,"last_column":16},"stack":"x4","type":1},{"state_loc":{"first_line":12,"last_line":14,"first_column":8,"last_column":11},"stack":"","type":5},{"state_loc":{"first_line":7,"last_line":15,"first_column":6,"last_column":9},"stack":"y = '+'\'|\''+'(1:A 2:B)","type":2},{"state_loc":{"first_line":6,"last_line":15,"first_column":6,"last_column":9},"stack":"b = nil","type":2},{"state_loc":{"first_line":5,"last_line":15,"first_column":6,"last_column":9},"stack":"a = 3","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":17,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":18,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp42\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp1212\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY=person(age:A&nbspid:B)&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspY&nbspof&nbspperson(age:C&nbspville:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x4 = 4","type":2},{"state_loc":{"first_line":13,"last_line":13,"first_column":10,"last_column":16},"stack":"x4","type":1},{"state_loc":{"first_line":12,"last_line":14,"first_column":8,"last_column":11},"stack":"","type":5},{"state_loc":{"first_line":7,"last_line":15,"first_column":6,"last_column":9},"stack":"y = person(age:A id:B)","type":2},{"state_loc":{"first_line":6,"last_line":15,"first_column":6,"last_column":9},"stack":"b = 1212","type":2},{"state_loc":{"first_line":5,"last_line":15,"first_column":6,"last_column":9},"stack":"a = 42","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":17,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":18,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp42\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp1212\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY=person(age:A&nbspid:B)&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspY&nbspof&nbspperson(age:C&nbspid:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x2 = 42","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":10,"last_column":14},"stack":"x2","type":1},{"state_loc":{"first_line":8,"last_line":10,"first_column":8,"last_column":11},"stack":["C = 42","D = 1212"],"type":5},{"state_loc":{"first_line":7,"last_line":15,"first_column":6,"last_column":9},"stack":"y = person(age:A id:B)","type":2},{"state_loc":{"first_line":6,"last_line":15,"first_column":6,"last_column":9},"stack":"b = 1212","type":2},{"state_loc":{"first_line":5,"last_line":15,"first_column":6,"last_column":9},"stack":"a = 42","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":17,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":18,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspB&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp42\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB&nbsp=&nbsp1212\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY=person(age:A&nbspid:B)&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspY&nbspof&nbspX&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x4 = 4","type":2},{"state_loc":{"first_line":13,"last_line":13,"first_column":10,"last_column":16},"stack":"x4","type":1},{"state_loc":{"first_line":12,"last_line":14,"first_column":8,"last_column":11},"stack":"","type":5},{"state_loc":{"first_line":7,"last_line":15,"first_column":6,"last_column":9},"stack":"y = person(age:A id:B)","type":2},{"state_loc":{"first_line":6,"last_line":15,"first_column":6,"last_column":9},"stack":"b = 1212","type":2},{"state_loc":{"first_line":5,"last_line":15,"first_column":6,"last_column":9},"stack":"a = 42","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"b","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":17,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":18,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbspY=3\n&nbsp&nbspcase&nbspY&nbspof&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x2 = 3","type":2},{"state_loc":{"first_line":5,"last_line":5,"first_column":6,"last_column":10},"stack":"x2","type":1},{"state_loc":{"first_line":4,"last_line":6,"first_column":4,"last_column":7},"stack":["C = 3"],"type":5},{"state_loc":{"first_line":3,"last_line":11,"first_column":2,"last_column":5},"stack":"y = 3","type":2},{"state_loc":{"first_line":2,"last_line":11,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":12,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbspY=3\n&nbsp&nbspcase&nbspY&nbspof&nbspperson(age:C)&nbspthen\n&nbsp&nbsp&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX2=C\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsplocal&nbspX4&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX4&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"x4 = 4","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":6,"last_column":12},"stack":"x4","type":1},{"state_loc":{"first_line":8,"last_line":10,"first_column":4,"last_column":7},"stack":"","type":5},{"state_loc":{"first_line":3,"last_line":11,"first_column":2,"last_column":5},"stack":"y = 3","type":2},{"state_loc":{"first_line":2,"last_line":11,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":12,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X+X\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"zx_1 = 6","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":12},"stack":"zx_1","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":9,"last_line":9,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":8,"last_line":9,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":7,"last_line":10,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X+X</p><p>&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":10,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":11,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX&nbsp?R}\n&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp2*X\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1&nbspR}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"r = 6","type":2},{"state_loc":{"first_line":5,"last_line":5,"first_column":6,"last_column":13},"stack":"zx_1 = 3","type":2},{"state_loc":{"first_line":4,"last_line":5,"first_column":6,"last_column":13},"stack":"zx_1","type":1},{"state_loc":{"first_line":3,"last_line":6,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":11,"last_line":11,"first_column":6,"last_column":14},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":10,"last_line":11,"first_column":6,"last_column":14},"stack":"r_1","type":1},{"state_loc":{"first_line":9,"last_line":12,"first_column":4,"last_column":7},"stack":"x1","type":1},{"state_loc":{"first_line":8,"last_line":13,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX&nbsp?R}<p>&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp2*X</p><p>&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":13,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":14,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"zx_3 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_3","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":13,"last_line":13,"first_column":4,"last_column":10},"stack":"x2 = 5","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":4,"last_column":10},"stack":"x2","type":1},{"state_loc":{"first_line":11,"last_line":14,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_1 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_1","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":9,"last_line":9,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":8,"last_line":9,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":7,"last_line":10,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":7,"last_line":14,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X</p><p>&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":14,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":15,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX2&nbspin\n&nbsp&nbsp&nbsp&nbspX2=5\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX2}\n&nbsp&nbspend&nbsp&nbsp\nend', '[{"state_loc":"","stack":"zx_23 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_23","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":53,"last_line":53,"first_column":4,"last_column":10},"stack":"x2_5 = 5","type":2},{"state_loc":{"first_line":52,"last_line":53,"first_column":4,"last_column":10},"stack":"x2_5","type":1},{"state_loc":{"first_line":51,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_21 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_21","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":49,"last_line":49,"first_column":4,"last_column":10},"stack":"x1_5 = 3","type":2},{"state_loc":{"first_line":48,"last_line":49,"first_column":4,"last_column":10},"stack":"x1_5","type":1},{"state_loc":{"first_line":47,"last_line":50,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":47,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_19 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_19","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":45,"last_line":45,"first_column":4,"last_column":10},"stack":"x2_4 = 5","type":2},{"state_loc":{"first_line":44,"last_line":45,"first_column":4,"last_column":10},"stack":"x2_4","type":1},{"state_loc":{"first_line":43,"last_line":46,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":43,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_17 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_17","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":41,"last_line":41,"first_column":4,"last_column":10},"stack":"x1_4 = 3","type":2},{"state_loc":{"first_line":40,"last_line":41,"first_column":4,"last_column":10},"stack":"x1_4","type":1},{"state_loc":{"first_line":39,"last_line":42,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":39,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_15 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_15","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":37,"last_line":37,"first_column":4,"last_column":10},"stack":"x2_3 = 5","type":2},{"state_loc":{"first_line":36,"last_line":37,"first_column":4,"last_column":10},"stack":"x2_3","type":1},{"state_loc":{"first_line":35,"last_line":38,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":35,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_13 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_13","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":33,"last_line":33,"first_column":4,"last_column":10},"stack":"x1_3 = 3","type":2},{"state_loc":{"first_line":32,"last_line":33,"first_column":4,"last_column":10},"stack":"x1_3","type":1},{"state_loc":{"first_line":31,"last_line":34,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":31,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_11 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_11","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":29,"last_line":29,"first_column":4,"last_column":10},"stack":"x2_2 = 5","type":2},{"state_loc":{"first_line":28,"last_line":29,"first_column":4,"last_column":10},"stack":"x2_2","type":1},{"state_loc":{"first_line":27,"last_line":30,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":27,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_9 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_9","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":25,"last_line":25,"first_column":4,"last_column":10},"stack":"x1_2 = 3","type":2},{"state_loc":{"first_line":24,"last_line":25,"first_column":4,"last_column":10},"stack":"x1_2","type":1},{"state_loc":{"first_line":23,"last_line":26,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":23,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_7 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_7","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":21,"last_line":21,"first_column":4,"last_column":10},"stack":"x2_1 = 5","type":2},{"state_loc":{"first_line":20,"last_line":21,"first_column":4,"last_column":10},"stack":"x2_1","type":1},{"state_loc":{"first_line":19,"last_line":22,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":19,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_5 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_5","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":17,"last_line":17,"first_column":4,"last_column":10},"stack":"x1_1 = 3","type":2},{"state_loc":{"first_line":16,"last_line":17,"first_column":4,"last_column":10},"stack":"x1_1","type":1},{"state_loc":{"first_line":15,"last_line":18,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":15,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_3 = 5","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_3","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":13,"last_line":13,"first_column":4,"last_column":10},"stack":"x2 = 5","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":4,"last_column":10},"stack":"x2","type":1},{"state_loc":{"first_line":11,"last_line":14,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":11,"last_line":54,"first_column":2,"last_column":5},"stack":"","type":5},{"state_loc":"","stack":"zx_1 = 3","type":2},{"state_loc":{"first_line":4,"last_line":4,"first_column":6,"last_column":10},"stack":"zx_1","type":1},{"state_loc":{"first_line":3,"last_line":5,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":9,"last_line":9,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":8,"last_line":9,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":7,"last_line":10,"first_column":2,"last_column":5},"stack":"","type":4},{"state_loc":{"first_line":7,"last_line":54,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX=X</p><p>&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":54,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":55,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX&nbsp?R}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspX\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspR1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1&nbspR1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"r1 = 3","type":2},{"state_loc":{"first_line":3,"last_line":3,"first_column":6,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":8,"last_line":8,"first_column":6,"last_column":15},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":7,"last_line":8,"first_column":6,"last_column":15},"stack":"r1","type":1},{"state_loc":{"first_line":6,"last_line":9,"first_column":4,"last_column":7},"stack":"x1","type":1},{"state_loc":{"first_line":5,"last_line":10,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX&nbsp?R}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspX</p><p>&nbsp&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":10,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":11,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp0\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX={NewCell&nbspA}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA1&nbsp=&nbsp@ZX+X\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX:=A1\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA2&nbsp=&nbsp@ZX+4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX:=A2\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"c4 := A2","type":2},{"state_loc":{"first_line":13,"last_line":13,"first_column":10,"last_column":16},"stack":"a2_1 = 4","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":10,"last_column":16},"stack":"a2_1","type":1},{"state_loc":"","stack":"c4 := A1","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":10,"last_column":16},"stack":"a1_1 = 3","type":2},{"state_loc":{"first_line":8,"last_line":9,"first_column":10,"last_column":16},"stack":"a1_1","type":1},{"state_loc":{"first_line":7,"last_line":14,"first_column":8,"last_column":11},"stack":"zx_1 = c4","type":2},{"state_loc":{"first_line":6,"last_line":14,"first_column":8,"last_column":11},"stack":"a_1 = 0","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":8,"last_column":11},"stack":"a_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":6,"last_column":9},"stack":"zx_1","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":18,"last_line":21,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsplocal&nbspZX&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp0</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX={NewCell&nbspA}</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA1&nbsp=&nbsp@ZX+X</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX:=A1</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA2&nbsp=&nbsp@ZX+4</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZX:=A2</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":21,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":22,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X==Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 5","type":2},{"state_loc":{"first_line":11,"last_line":11,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = false","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X==Z)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X&gtZ)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 5","type":2},{"state_loc":{"first_line":11,"last_line":11,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = false","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X>Z)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X&gt=Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 5","type":2},{"state_loc":{"first_line":11,"last_line":11,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = false","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X>=Z)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X=&ltZ)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 3","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = true","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X=<Z)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X&ltZ)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 3","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = true","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X<Z)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsptrue\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 3","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = true","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsptrue</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbspfalse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y_2 = 5","type":2},{"state_loc":{"first_line":11,"last_line":11,"first_column":14,"last_column":19},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1 = false","type":2},{"state_loc":{"first_line":7,"last_line":12,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":12,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":13,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":14,"first_column":8,"last_column":11},"stack":"y_2","type":1},{"state_loc":{"first_line":3,"last_line":15,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":19,"last_line":19,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":18,"last_line":19,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":20,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbspfalse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":20,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":21,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspR.a\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z1_1 = 3","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":14,"last_column":22},"stack":"z1_1","type":1},{"state_loc":{"first_line":8,"last_line":10,"first_column":12,"last_column":15},"stack":"r_1 = person(a:X)","type":2},{"state_loc":{"first_line":7,"last_line":10,"first_column":12,"last_column":15},"stack":"r_1","type":1},{"state_loc":{"first_line":6,"last_line":11,"first_column":10,"last_column":13},"stack":"x_2 = 3","type":2},{"state_loc":{"first_line":5,"last_line":11,"first_column":10,"last_column":13},"stack":"x_2","type":1},{"state_loc":{"first_line":4,"last_line":12,"first_column":7,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":17,"last_line":17,"first_column":6,"last_column":12},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":16,"last_line":17,"first_column":6,"last_column":12},"stack":"z = 5","type":2},{"state_loc":{"first_line":15,"last_line":17,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":14,"last_line":18,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspR.a</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":18,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":19,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":20,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspR&nbspof&nbspperson(a:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z1_1 = 4","type":2},{"state_loc":{"first_line":8,"last_line":8,"first_column":15,"last_column":21},"stack":"z1_1","type":1},{"state_loc":{"first_line":7,"last_line":9,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = person(a:X)","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 5","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspR&nbspof&nbspperson(a:D)&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspR&nbspof&nbspperson(1:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z2_1 = 5","type":2},{"state_loc":{"first_line":12,"last_line":12,"first_column":14,"last_column":20},"stack":"z2_1","type":1},{"state_loc":{"first_line":11,"last_line":13,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = person(a:X)","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 5","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspR&nbspof&nbspperson(1:D)&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspR&nbspof&nbspX&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z2_1 = 5","type":2},{"state_loc":{"first_line":12,"last_line":12,"first_column":14,"last_column":20},"stack":"z2_1","type":1},{"state_loc":{"first_line":11,"last_line":13,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = person(a:X)","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 5","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspperson(a:X)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspR&nbspof&nbspX&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(d:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbspperson(a:Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z2_1 = 5","type":2},{"state_loc":{"first_line":12,"last_line":12,"first_column":14,"last_column":20},"stack":"z2_1","type":1},{"state_loc":{"first_line":11,"last_line":13,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = 4","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = person(a:Z)","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 5","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(d:D)&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbsp4</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(a:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspD\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbspperson(a:Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z1_1 = 3","type":2},{"state_loc":{"first_line":8,"last_line":8,"first_column":15,"last_column":21},"stack":"z1_1","type":1},{"state_loc":{"first_line":7,"last_line":9,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = 4","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = person(a:Z)","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 3","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(a:D)&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspD</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(a:D)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspD\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbspperson(a:Z&nbspb:Z&nbsp1:Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z2_1 = 5","type":2},{"state_loc":{"first_line":12,"last_line":12,"first_column":14,"last_column":20},"stack":"z2_1","type":1},{"state_loc":{"first_line":11,"last_line":13,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = 4","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = person(a:Z b:Z 1:Z)","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 3","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(a:D)&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspD</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]'); 
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsplocal&nbspZ&nbspin&nbsp&nbsp&nbsp&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(a:D&nbspb:E&nbsp1:F)&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspD\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n	&nbsp&nbspZ&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbspperson(a:Z&nbspb:Z&nbsp1:Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z1_1 = 3","type":2},{"state_loc":{"first_line":8,"last_line":8,"first_column":15,"last_column":21},"stack":"z1_1","type":1},{"state_loc":{"first_line":7,"last_line":9,"first_column":12,"last_column":15},"stack":"","type":7},{"state_loc":{"first_line":6,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1 = 4","type":2},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"r_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":6,"last_column":12},"stack":"x1 = person(a:Z b:Z 1:Z)","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":6,"last_column":12},"stack":"z = 3","type":2},{"state_loc":{"first_line":18,"last_line":20,"first_column":3,"last_column":12},"stack":"x1","type":1},{"state_loc":{"first_line":17,"last_line":21,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcase&nbspX&nbspof&nbspperson(a:D&nbspb:E&nbsp1:F)&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ1&nbsp=&nbspD</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ2&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ2&nbsp=&nbsp5</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p>, y, z)","type":2},{"state_loc":{"first_line":3,"last_line":21,"first_column":4,"last_column":7},"stack":"z","type":1},{"state_loc":{"first_line":2,"last_line":22,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":23,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY1&nbspin&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X==Z)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY1&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspY1}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbspend\n&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"y1_3 = 3","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":14,"last_column":20},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":13,"first_column":12,"last_column":15},"stack":"c_3 = true","type":2},{"state_loc":{"first_line":7,"last_line":13,"first_column":12,"last_column":15},"stack":"z_3 = 4","type":2},{"state_loc":{"first_line":6,"last_line":13,"first_column":12,"last_column":15},"stack":"c_3","type":1},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"z_3","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"y1_3","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":6,"last_column":9},"stack":"","type":42},{"state_loc":{"first_line":12,"last_line":12,"first_column":14,"last_column":20},"stack":"y1_1 = 4","type":2},{"state_loc":{"first_line":11,"last_line":12,"first_column":14,"last_column":20},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":13,"first_column":12,"last_column":15},"stack":"c_1 = false","type":2},{"state_loc":{"first_line":7,"last_line":13,"first_column":12,"last_column":15},"stack":"z_1 = 4","type":2},{"state_loc":{"first_line":6,"last_line":13,"first_column":12,"last_column":15},"stack":"c_1","type":1},{"state_loc":{"first_line":5,"last_line":14,"first_column":10,"last_column":13},"stack":"z_1","type":1},{"state_loc":{"first_line":4,"last_line":15,"first_column":8,"last_column":11},"stack":"y1_1","type":1},{"state_loc":{"first_line":3,"last_line":16,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":20,"last_line":20,"first_column":4,"last_column":10},"stack":"x1 = 3","type":2},{"state_loc":{"first_line":19,"last_line":20,"first_column":4,"last_column":10},"stack":"x1","type":1},{"state_loc":{"first_line":18,"last_line":21,"first_column":2,"last_column":5},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspY1&nbspin&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbsp4&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(X==Z)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY1&nbsp=&nbsp3</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse&nbsp</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspY1&nbsp=&nbsp4</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspY1}</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbspend</p>, y)","type":2},{"state_loc":{"first_line":2,"last_line":21,"first_column":4,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":22,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspY&nbspin\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbspY&nbsp=&nbspproc{$&nbspX}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbspA+X\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp4\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspX1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX1&nbsp=&nbsp2\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Y&nbspX1}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"z_1 = 5","type":2},{"state_loc":{"first_line":6,"last_line":6,"first_column":8,"last_column":15},"stack":"z_1","type":1},{"state_loc":{"first_line":5,"last_line":7,"first_column":6,"last_column":9},"stack":"","type":1},{"state_loc":{"first_line":13,"last_line":13,"first_column":8,"last_column":14},"stack":"x1 = 2","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":8,"last_column":14},"stack":"x1","type":1},{"state_loc":{"first_line":11,"last_line":14,"first_column":6,"last_column":9},"stack":"a_1 = 4","type":2},{"state_loc":{"first_line":10,"last_line":14,"first_column":6,"last_column":9},"stack":"a_1","type":1},{"state_loc":{"first_line":9,"last_line":15,"first_column":4,"last_column":7},"stack":"y = (proc{$&nbspX}<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspZ&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspZ&nbsp=&nbspA+X</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbspend</p>, y, a = 3)","type":2},{"state_loc":{"first_line":4,"last_line":15,"first_column":4,"last_column":7},"stack":"a = 3","type":2},{"state_loc":{"first_line":3,"last_line":15,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":2,"last_line":16,"first_column":2,"last_column":5},"stack":"y","type":1},{"state_loc":{"first_line":1,"last_line":17,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
	add_test('local&nbspFact&nbspin\n&nbsp&nbspFact&nbsp=&nbspproc{$&nbspN&nbspAcc&nbsp?R}\n&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspN1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR1&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(N==0)\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspAcc\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1&nbsp=&nbspN-1\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA1&nbsp=&nbspN*Acc\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Fact&nbspN1&nbspA1&nbspR1}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\n&nbsp&nbsplocal&nbspA&nbspin\n&nbsp&nbsp&nbsp&nbsplocal&nbspAcc&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR&nbspin\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA&nbsp=&nbsp3\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAcc&nbsp=&nbsp1\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Fact&nbspA&nbspAcc&nbspR}\n&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbsp&nbsp&nbspend\n&nbsp&nbspend\nend', '[{"state_loc":"","stack":"r_6 = 6","type":2},{"state_loc":{"first_line":9,"last_line":9,"first_column":14,"last_column":21},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":14,"first_column":12,"last_column":15},"stack":"c_5 = true","type":2},{"state_loc":{"first_line":7,"last_line":14,"first_column":12,"last_column":15},"stack":"r1_5","type":1},{"state_loc":{"first_line":6,"last_line":15,"first_column":10,"last_column":13},"stack":"a1_5","type":1},{"state_loc":{"first_line":5,"last_line":16,"first_column":8,"last_column":11},"stack":"n1_5","type":1},{"state_loc":{"first_line":4,"last_line":17,"first_column":6,"last_column":9},"stack":"c_5","type":1},{"state_loc":{"first_line":3,"last_line":18,"first_column":4,"last_column":7},"stack":"","type":42},{"state_loc":{"first_line":13,"last_line":13,"first_column":14,"last_column":29},"stack":"a1_3 = 6","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":14,"last_column":29},"stack":"n1_3 = 0","type":2},{"state_loc":{"first_line":11,"last_line":13,"first_column":14,"last_column":29},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":14,"first_column":12,"last_column":15},"stack":"c_3 = false","type":2},{"state_loc":{"first_line":7,"last_line":14,"first_column":12,"last_column":15},"stack":"r1_3","type":1},{"state_loc":{"first_line":6,"last_line":15,"first_column":10,"last_column":13},"stack":"a1_3","type":1},{"state_loc":{"first_line":5,"last_line":16,"first_column":8,"last_column":11},"stack":"n1_3","type":1},{"state_loc":{"first_line":4,"last_line":17,"first_column":6,"last_column":9},"stack":"c_3","type":1},{"state_loc":{"first_line":3,"last_line":18,"first_column":4,"last_column":7},"stack":"","type":42},{"state_loc":{"first_line":13,"last_line":13,"first_column":14,"last_column":29},"stack":"a1_2 = 6","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":14,"last_column":29},"stack":"n1_2 = 1","type":2},{"state_loc":{"first_line":11,"last_line":13,"first_column":14,"last_column":29},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":14,"first_column":12,"last_column":15},"stack":"c_2 = false","type":2},{"state_loc":{"first_line":7,"last_line":14,"first_column":12,"last_column":15},"stack":"r1_2","type":1},{"state_loc":{"first_line":6,"last_line":15,"first_column":10,"last_column":13},"stack":"a1_2","type":1},{"state_loc":{"first_line":5,"last_line":16,"first_column":8,"last_column":11},"stack":"n1_2","type":1},{"state_loc":{"first_line":4,"last_line":17,"first_column":6,"last_column":9},"stack":"c_2","type":1},{"state_loc":{"first_line":3,"last_line":18,"first_column":4,"last_column":7},"stack":"","type":42},{"state_loc":{"first_line":13,"last_line":13,"first_column":14,"last_column":29},"stack":"a1_1 = 3","type":2},{"state_loc":{"first_line":12,"last_line":13,"first_column":14,"last_column":29},"stack":"n1_1 = 2","type":2},{"state_loc":{"first_line":11,"last_line":13,"first_column":14,"last_column":29},"stack":"","type":6},{"state_loc":{"first_line":8,"last_line":14,"first_column":12,"last_column":15},"stack":"c_1 = false","type":2},{"state_loc":{"first_line":7,"last_line":14,"first_column":12,"last_column":15},"stack":"r1_1","type":1},{"state_loc":{"first_line":6,"last_line":15,"first_column":10,"last_column":13},"stack":"a1_1","type":1},{"state_loc":{"first_line":5,"last_line":16,"first_column":8,"last_column":11},"stack":"n1_1","type":1},{"state_loc":{"first_line":4,"last_line":17,"first_column":6,"last_column":9},"stack":"c_1","type":1},{"state_loc":{"first_line":3,"last_line":18,"first_column":4,"last_column":7},"stack":"","type":1},{"state_loc":{"first_line":25,"last_line":25,"first_column":8,"last_column":22},"stack":"acc = 1","type":2},{"state_loc":{"first_line":24,"last_line":25,"first_column":8,"last_column":22},"stack":"a = 3","type":2},{"state_loc":{"first_line":23,"last_line":25,"first_column":8,"last_column":22},"stack":"r_1","type":1},{"state_loc":{"first_line":22,"last_line":26,"first_column":6,"last_column":9},"stack":"acc","type":1},{"state_loc":{"first_line":21,"last_line":27,"first_column":4,"last_column":7},"stack":"a","type":1},{"state_loc":{"first_line":20,"last_line":28,"first_column":2,"last_column":5},"stack":"fact = (proc{$&nbspN&nbspAcc&nbsp?R}<p>&nbsp&nbsp&nbsp&nbsplocal&nbspC&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspN1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspA1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplocal&nbspR1&nbspin</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC&nbsp=&nbsp(N==0)</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif&nbspC&nbspthen</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR&nbsp=&nbspAcc</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1&nbsp=&nbspN-1</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspA1&nbsp=&nbspN*Acc</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{Fact&nbspN1&nbspA1&nbspR1}</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbsp&nbsp&nbspend</p><p>&nbsp&nbspend</p>, fact)","type":2},{"state_loc":{"first_line":2,"last_line":28,"first_column":2,"last_column":5},"stack":"fact","type":1},{"state_loc":{"first_line":1,"last_line":29,"first_column":0,"last_column":3},"stack":"{}","type":100}]');
}


 